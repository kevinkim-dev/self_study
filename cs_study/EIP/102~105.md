# CS_Study_정보처리기사 5주차

> 04.28 ~ 05.04
>
> 제 3과목 데이터베이스 구축 - 2) 물리 데이터베이스 설계
>
> 102장~105장
>
> by. 김승현



## 102. 데이터베이스 백업



### 데이터베이스 백업

- 전산 장비의 장애에 대비해서 데이터를 보호하고 복구하기 위한 작업으로, 정기적인 백업이 필수이다.
  - 장애 유형: 사용자 실수, 미디어 장애, 구문 장애,사용자 프로세스 장애, 인스턴스 장애 등
- 데이터베이스의 처리 내용이나 이용 상황 등 상태변화를 git처럼 바뀌는 대로 모두 기록한 파일로, 복구를 위해 필수적으로 필요한 파일을 로그 파일이라고 한다.
- 로그 파일을 기반으로 데이터베이스의 복귀(Undo), 재생(Redo)을 수행하며 데이터베이스 상태를 일관성 있게 유지할 수 있다.
- Rollback, 트랜잭션, 데이터 입력, 수정, 삭제 시점 등 모든 시점에서 기록된다.



### 데이터베이스 복구 알고리즘

- 사전지식
  - 동기적 갱신: 트랜잭션이 전부 완료되지 않아도 동시에 데이터 변경 내용이 저장되는 것
  - 비동기적 갱신: 데이터 변경 내용이 동시에 이루어지지 않는 것

- No-UNDO/REDO : 데이터베이스 버퍼의 내용을 비동기적으로 갱신한 경우 복구 알고리즘.

  비동기적으로 갱신했기 때문에 변경내용이 아직 저장되지 않았고, 취소할 필요가 없다. 하지만, 트랜잭션은 이미 완료가 되었고 버퍼엔 저장되었지만, 저장 매체에 기록되지 않았으므로 REDO가 필요하다.

- UNDO/NO-REDO : 데이터베이스 버퍼의 내용을 동기적으로 갱신한 경우 복구 알고리즘.

  동기적으로 갱신했기 때문에, 트랜잭션이 완료되지 않은 상태에서 저장 된 내용은 일관성을 해하기 때문에 UNDO는 필수적이다. 해당 트랜잭션 수행 전까지 내용은 저장이 되었으므로 REDO는 필요 없다.

- UNDO/REDO : 데이터베이스 버퍼의 내용을 동기/비동기적으로 갱신한 경우 복구 알고리즘.

  완료된 트랜잭션이 데이터베이스에 기록되지 못했다면 다시 실행해야 한다.

- NO-UNDO/NO-REDO: 데이터베이스 버퍼의 내용을 동기적으로 저장 매체에 기록하지만 데이터베이스와는 다른 영역에 기록한 경우 사용할 복구 알고리즘.

  다른 영역에 기록되어잇으므로 굳이 취소 안해도되고, 기록 되어 있으므로 다시 안해도 된다.



### 백업의 종류

- 물리 백업: 데이터베이스 파일을 백업하는 방법으로, 속도가 빠르고 작업이 단순하지만, 문제 발생 시 원인 파악 및 문제 해결이 어렵다
- 논리 백업: DB 내의 논리적 객체들을 백업하는 방법으로, 복원시 데이터 손상을 막고, 문제 발생시 원인 파악 및 해결이 수월하지만, 시간이 많이 소모된다.





### 기출문제 따라잡기.

1. 데이터베이스 백업에 대한 설명으로 틀린 것은?

   로그 파일은 작업의 순서가 아니라 시간의 흐름에 따라 모두 기록하는 파일이다.

2. 백업에 대한 설명으로 옳지 않은 것은?

   논리 백업은 완전복구가 불가능하며, 물리 백업 + 로그파일이 있을시에만 가능하다.





## 103. 스토리지



### 스토리지

- 단일 디스크로 처리할 수 없는 대용량 데이터를 저장하기 위해 서버와 저장장치를 연결하는 기술이다. 
  - DAS(Direct Attached Storage): 서버와 저장장치를 전용 케이블로 직접 연결하는 방식으로, 외장 하드 등을 연결하는 것이 여기에 해당된다. 
    - 서버에서 저장장치를 관리하며 직접 연결되어 속도가 빠르고, 설치 운영이 쉽다.
    - 다른 서버에 접근하거나 파일을 공유할 수 없다. 
  - NAS(Network Attached Storage): 서버와 저장장치를 네트워크를 통해 연결하는 방식이다.
    - NAS Storage가 별도로 저장장치를 직접 관리한다.
    - 파일 공유가 가능하고 확장성, 유연성이 우수하다.
    - 접속 증가시 성능이 저하될 수 있다.
  - SAN(Storage Area Networ): DAS의 빠른 처리와 NAS의 공유 가능하단 장점을 통합한 방식으로 서버와 저장 장치를 연결하는 전용 네트워크를 별도로 구성하는 것.
    - 파이버 채널 스위치를 이용하여 새로운 네트워크를 구성한다.
    - 광케이블로 연결하여 빠르며 파일 공유가 가능하다.
    - 확장성, 유연성, 가용성이 가장 뛰어나다.
    - 효과적이지만, 장비의 업그레이드가 필요하고, 네트워크 초기 구축시 비용이 발생한다.



### 기출문제 따라잡기

1. 다음 보기는 무엇에 대한 설명인가?

   별도 네트워크가 있고 FC 스위치를 이용하는 것은 SAN을 말한다.

2. 다음 중 스토리지에 대한 설명으로 틀린 것은?

   DAS는 물리적으로 연결하는 방식이며, 확장성과 유연성이 상대적으로 떨어진다.

3. 다음 설명에 해당하는 스토리지 시스템은?

   직접 연결하는 방식은 DAS라고 한다.





## 104. 논리 데이터 모델의 물리 데이터 모델 변환



### 테이블

- 데이터를 저장하는 데이터베이스의 가장 기본적인 오브젝트이며 column과 row로 구성
- 기본키: 후보키 중에서 선택한 Main Key
- 외래키: 다른 릴레이션의 기본키를 참조하는 속성, 속성들의 집합



### Entity -> Table

- 논리 데이터 모델에서 정의된 엔티티를 물리 데이터 모델의 테이블로 변환하는 것.
  - 엔티티 -> 테이블
  - 속성 -> 컬럼
  - 주 식별자 -> 기본 키
  - 외부 식별자 -> 외래키
  - 관계 -> 관계

- 변환시 고려사항
  - 일반적으로 명칭은 동일하게 한다.
  - 테이블의 소스 코드 가독성을 위해 테이블은 영문을 사용한다
  - 메타 데이터 관리 시스템에 표준화된 용어가 있을 때는 메타에 등록된 단어를 사용하여 명명한다.



### 슈퍼타입/서브타입을 테이블로 변환

- 슈퍼타입, 서브타입은 논리 데이터 모델에서 이용되는 형태이므로 물리 데이터 모델 설계시에 테이블로 변환해야 한다.

- 슈퍼타입 기준 테이블 변환

  서브 타입을 슈퍼 타입으로 통합하여 하나의 테이블로 만드는 것. 서브타입의 속성이나 관계가 적을 경우에 적용하는 방법. 서브 타입의 모든 속성이 포함되어야 한다.

  - 장점
    - 데이터 액세스가 상대적으로 용이하다.
    - 뷰를 이용하여 각각의 서브 타입만을 액세스하거나 수정할 수 있다.
    - 서브타입 구분이 없는 임의 집합에 대한 처리가 용이해진다.
    - SQL 문장 구성이 단순해진다.
    - 여러 테이블을 조인하지 않아도 되어서 수행속도가 빨라진다.
  - 단점
    - 테이블 컬럼이 증가하여 저장 공간이 증가한다
    - 서브타입에 대한 TYPE 구분이 필요한 경우가 많아진다
    - 인덱스 크기 증가로 인덱스 효율이 떨어진다.

- 서브타입 기준 테이블 변환

  슈퍼 타입 속성을 서브타입에 추가하여 서브타입들을 개별적인 테이블로 만드는 것. 서브타입에 속성이나 관계가 많은 경우 적용

  - 장점
    - 속성의 선택사양이 명확한 경우 유리하다
    - 서브 타입의 유형을 구분할 필요가 없고, 스캔속도가 빨라진다.
  - 단점
    - 수행속도가 감소할 수 있다.
    - 복잡한 처리를 하는 SQL의 통합이 어렵다
    - 부분 범위에 대한 처리가 곤란해진다.
    - 식별자의 유지관리가 어렵다.

- 개별 타입 기준 테이블 변환

  슈퍼 타입과 서브 타입들을 각각의 개별적인 테이블로 변환한다. 슈퍼타입과 서브타입 테이블 사이에는 1:1 관계가 형성된다.

  전체 데이터에 대한 처리가 빈번한 경우, 서브타입 처리가 독립적으로 발생하는 경우, 테이블의 컬럼 수가 많은 경우, 서브 타입 컬럼수가 많은 경우, 클러스터링이 필요한 경우 등에 해당된다

  - 장점
    - 저장 공간이 상대적으로 작다.
    - 각각의 테이블만 조회하면 용이하다.
  - 단점
    - 두개 이상의 타입의 정보를 동시에 처리하면 조인이 발생하여 성능이 저하된다.





### 속성을 컬럼으로 변환

- 일반 속성 변환: 속성과 컬럼은 명칭이 반드시 일치하지 않아도 되지만, 의사소통을 통해 표준화된 약어로 통일하는 것이 좋다
- Primary UID를 기본키로 변환, 혹은 관계의 UID Bar를 기본키로 변환(다른 엔티티와의 관계로 생긴 것)
- Secondary(Alternate) UID를 기본키로 변환





### 관계를 외래키로 변환

- 논리 데이터 모델에서 정의된 관계는 기본키와 이를 참조하는 외래키로 변환한다.

  - 1:1 관계 : 한쪽의 기본키를 다른 쪽의 외래키로 추가하여 표현한다.
  - 1:M 관계: 1 쪽의 기본키를 M 쪽의 외래키로 추가하여 표현한다.
  - N:M 관계 : 교차 릴레이션, 혹은 교차 엔티티라는 새로운 별도의 릴레이션을 만든다. 이 릴레이션은 두 테이블의 기본키로 이루어져있다.

  - 1:M 순환 관계 : 개체 A에 개체 A의 기본키를 참조하는 외래 키 컬럼을 추가하여 표현



### 관리 목적의 테이블/컬럼 추가

- 논리 데이터 모델에는 존재하지 않지만 수행속도 향상을 목적으로 모델에 추가할수도 있다.



### 데이터 타입 선택

- 논리 데이터 모델에서 정의된 타입을 물리적 DBMS의 물리적 특성과 성능을 고려하여 최적의 데이터 타입과 길이를 선택한다.
- 주로 사용되는 유형: CHAR, VARCHAR2, NUMBER, DATE





### 기출문제 따라잡기

1. 다음 중 논리 데이터베이스에서 설계한 객체들이 물리 데이터베이스로 변환되는 가정에 대해 틀린 것은?

   주 식별자는 기본 키로 변환된다.

2. 논리 데이터 모델을 물리 데이터 모델로 변환하는 과정에서 슈퍼타입과 서브타입을 테이블로 변환하는 방법이 아닌 것은?

   서브 타입을 기준으로 하나로 바꿀 수 없고 모든 서브 타입을 테이블로는 만들 수 있다.

3. 다음 중 슈퍼타입.서브타입 데이터 모델의 변환 방법으로 가장 부적절한 것은?

   슈퍼타입과 서브타입을 독립적인 테이블로 변환하면 1:1 관계로 바뀐다.

4. 다음 중 논리 데이터 모델의 속성을 컬럼으로 변환하는 방법으로 가장 옳지 않은 것은?

   컬럼명은 간단하게 작성한다.





## 105. 물리 데이터 모델 품질 검토



### 물리 데이터 모델 품질 검토

- 물리 데이터 모델을 설계하고 데이터베이스 객체를 생성한 후 개발 단계로 넘어각 전에 모델러와 이해관계자들이 모여 수행한다.

- 기준
  - 정확성
  - 완전성
  - 준거성
  - 최신성
  - 일관성
  - 활용성

- 검토항목: 모델 품질 검토 기준을 작성한 후 이를 기반하여 작성하여, 체크리스트를 작성한다.
- 검토 순서
  - 데이터 품질 정책 및 기준 확인
  - 물리 데이터 품질의 특성에 따라 품질 기준 작성
  - 품질 기준에 따라 체크리스트 작성
  - 논리 데이터 모델과 물리 데이터 모델 비교
  - 모델러와 이해관계자가 품질 검토를 수행
  - 모델러와 이해관계자의 체크리스트를 종합하여 품질 검토 보고서 작성





### 기출문제 따라잡기

1. 물리 데이터 모델의 품질 검토에 대한 내용으로 가장 옳지 않은 것은?

   데이터 품질 기준 및 정택은 지속적으로 수정 될 수 있다.

2. 데이터 모델의 품질 기준에 대한 설명으로 틀린 것은?

   데이터 표준, 표준화 규칙 등을 정확히 준수하는 것은 준거성을 말한다.

